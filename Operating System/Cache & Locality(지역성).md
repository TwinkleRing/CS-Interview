# 캐시의 지역성 원리


## 캐시 메모리(Cache Memory)
캐시 메모리는 속도가 빠른 장치와 느린 장치간의 속도차이에 따른 병목 현상을 줄이기 위한 범용 메모리이다.
* ex1) CPU 코어와 메인 메모리 사이의 병목 현상 완화
* ex2) 웹 브라우저 캐시 파일은, 하드디스크와 웹 페이지 사이의 병목 현상을 완화

CPU가 주 기억장치에서 저장된 데이터를 읽어올 때, 자주 사용하는 데이터를 캐시 메모리에 저장하고</br>
다음에 이 데이터를 이용할 때 주 기억장치가 아닌 캐시 메모리에서 먼저 가져오면서 속도를 향상시킨다.

## 데이터 지역성

캐시 메모리는 이러한 역할을 수행하기 위해서는 CPU가 어떤 데이터를 원할 것인가를 어느 정도 예측할 수 있어야 한다.</br>
캐시의 성능은 적응 용량의 캐시 메모리에 CPU가 이후에 참조할, 쓸모 있는 정보가 어느 정도 들어있느냐에 따라 좌우되기 때문이다.

이때, 적중률(Hit rate)을 극대화 시키기 위해 데이터 **지역성(Locality)의 원리**를 사용한다.</br>
지역성의 전제 조건으로 프로그램은 모든 코드나 데이터를 균등하게 Access 하지 않는다는 특성을 기본으로 한다.</br>
즉, Locality(지역성)이란 기억장치 내의 정보를 균일하게 Access 하는 것이 아닌 어느 한 순간에 **특정 부분을 집중적으로 참조**하는 특성이다.


## 데이터 지역성의 종류
* 시간 지역성 : 최근에 참조된 주소의 내용은 곧 다음에 다시 참조되는 특성
* 공간 지역성 : 대부분의 실제 프로그램이 참조된 주소와 인접한 주소의 내용이 다시 참조되는 특성

## Caching Line

캐시(Cache)는 프로세서 가까이에 위치하면서 빈번하게 사용되는 데이터를 저장해두는 장소이다.</br>
하지만 캐시가 아무리 가까이 있더라도 찾고자하는 데이터가 어느 곳에 저장되어 있는지 몰라서 모든 데이터를 순회해야 한다면</br>
시간이 오래 걸리게 된다. 즉, 캐시에 목적 데이터가 저장되어 있다면 바로 접근하여 출력할 수 있어야 캐시가 의미 있어진다는 뜻이다.

그렇기 때문에 캐시에 데이터를 저장할 때 특정 자료구조를 사용하여 **묶음**으로 저장하게 되는데 이를 **캐싱 라인**이라고 한다.</br>
프로세스는 다양한 주소에 있는 데이터를 사용하므로 빈번하게 사용하는 데이터의 주소 또한 흩어져 있다.</br>
따라서 캐시에 저장하는 데이터에는 데이터의 메모리 주소 등을 기록해 둔 태그를 달아놓을 필요가 있다.</br>
이러한 태그들의 묶음을 **캐싱 라인**이라고 하고 메모리로부터 가져올 때도 캐싱 라인을 기준으로 가져온다.</br>

### Caching Line의 종류
* Full Associative 
  : 비어있는 캐시 메모리가 있으면, 마음대로 주소를 저장하는 방식이다. </br>
    저장할 때는 매우 간단하지만, 찾을 때가 문제로 조건이나 규칙이 없어서 특정 캐시 Set 안에 있는 모든 블럭을 한번에 찾아 원하는 데이터가 있는지 검색해야 한다. </br>
    CAM이라는 특수한 메모리 구조를 사용해야하지만 가격이 매우 비싸다.
* Set Associative
* Direct Map
