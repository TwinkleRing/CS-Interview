# 운영체제

### 1. 프로그램과 프로세스의 차이

Program은 파일 시스템(하드 디스크, SSD)에 저장되어 존재하는 실행 파일(실행코드와 데이터).

Process는 Program이 실행되어 실제 메모리 상에 적재되고 CPU를 할당받아 실행되고 있는 상태.


### 2. 프로세스와 스레드

프로세스는 메모리 상에서 실행중인 프로그램의 인스턴스(독립적인 개체)이다.

스레드란,  이 프로세스 내의 독립적인 실행 흐름의 단위를 말한다.


프로세스는 각각 독립된 메모리 영역(Code, Data, Stack, Heap)을 가진다.

그러므로 한 프로세스가 다른 프로세스의 자원에 접근하려면 프로세스 간의 통신(IPC, inter-process communication)을 사용해야 한다.

스레드는 프로세스가 할당받은 자원을 이용하는 실행의 단위로 
프로세스 내에서 각각 Stack만 따로 할당받고 Code, Data,Heap 영역은 공유한다.

### 4. Context Switching
프로세스가 실행되다가 인터럽트가 발생하여 운영체제에 의해 CPU(프로세서)가 할당된 프로세스를 바꾸는 것을 말한다.

프로세서가 다른 프로세스로 스위치할 때 시스템은 현재 작업중인 프로세스의 상태(Context)를 저장하고 새로운 프로세스의 상태를 로드한다.

### 5. 멀티 프로세스 VS 멀티 쓰레드


+ 멀티 프로세스는 다수의 프로세스를 실행하는 것이다. fork를 통해 프로세스를 복사하여 사용하는데, </br> 부모와 자식 관계라 해도 프로세스마다 독자적인 메모리 영역을 가진다.

+ 멀티 쓰레드는 단일 프로세스에서 여러 개의 스레드가 병행적으로 처리되는 것을 말한다.

멀티 프로세스와 멀티 쓰레드 모두 동시에 두 가지 이상의 루틴을 실행 할 수 있는 역할을 한다.

---
> ####  멀티 프로세스
- 장점 : 여러 자식 프로세스 중 하나에 문제가 발생하면 그 자식 프로세스만 죽는 것 이상으로 다른 영향이 확산되지 않는다.
- 단점 : 여러 프로세스가 실행될 때 CPU에서는 문맥교환(Context Switching)이 발생하므로 이때 성능 저하가 발생한다. </br> 또한 프로세스 간에 데이터를 주고 받을 때 복잡하고 비용이 비싼 IPC(Inter Process Communication)을 사용해야한다.

> ####   멀티 쓰레드
- 장점 : 다른 쓰레드와 Stack을 제외한 Code, Data, Heap 영역의 자원을 공유하여 메모리 낭비, 문맥 교환에 소비되는 시간도 감소한다.
  </br>프로세스 간 통신(IPC)보다 스레드 간의 통신 비용이 적어 작업들 간 부담이 감소한다.
  </br>프로세스를 생성하여 자원을 할당하는 시스템 콜이 감소함으로써 자원의 효율적 관리가 가능하다.
- 단점 : 자원을 공유하므로 동기화 문제가 발생하고 하나의 스레드에 문제가 발생하면 전체 프로세스가 영향을 받는다.



### 6. 교착상태(Dead Lock)

#### 교착 상태란. 다중 프로그래밍 환경에서 여러 프로세스가 한정된 자원을 사용하기 위해 경쟁하고 있으며,
한 프로세스가 자원을 사용하려 할때 해당 자원을 얻지 못해 다음 처리를 하지 못하는 상태를 말합니다.
시스템적으로 한정된 자원을 여러 프로세스가 사용하려고 할 때 발생하는 문제로 교착상태가 발생하는 4가지 조건이 있습니다.

##### 1. 상호배제 |  한번에 한개의 프로세스만이 공유 자원을 사용할 수 있어야 합니다.
---
##### 2. 점유와 대기(Hold and Wait) |  최소한 하나의 자원을 점유하고 있으면서 다른 프로세스에 할당되어 사용되고 있는 자원을 추가로 점유하기 위해 대기하는 프로세스가 있어야합니다.
---
##### 3. 비선점(Non-preemption) |  다른 프로세스에 할당된 자원은 사용이 끝날때 까지 강제로 빼앗을 수 없어야합니다.
---
##### 4. 순환 대기(Circular Wait) |  공유 자원과 공유 자원을 사용하기 위해 대기하는 프로세스들이 원형으로 구성되어 있어 자신에게 할당된 자원을 점유하면서 앞이나 뒤에 있는 프로세스의 자원을 요구해야 합니다.

---
순환대기는 점유와 대기, 비선점을 모두 만족해야 성립합니다.

### 7. 교착상태 처리 기법




### 8. 뮤텍스 & 세마포어

##### 임계 구역(Critical Section) : 여러 프로세스가 자원을 공유하며 수행 될 때, 각 프로세스에서 공유 자원을 접근하는 프로그램 코드 부분 </br> 공유 자원을 여러 프로세스가 동시에 접근할 때 잘못된 결과를 만들 수 있기 때문에, 한 프로세스가 임계 구역을 수행할 때는 다른 프로세스가 접근하지 못하도록 해야 한다.

여러 프로세스나 쓰레드가 공유 자원에 접근하는 것을 제어하기 위한 방법
병행 처리를 위한 프로세스 동기화 기법

Mutex(뮤텍스)
뮤텍스는 자원에 대한 접근을 동기화하기 위해 사용되는 상호배제 기술이다. 이것은 프로그램이 시작될 때 고유한 이름으로 생성된다. 뮤텍스는 Locking 메커니즘으로 오직 하나의 쓰레드만이 동일한 시점에 뮤텍스를 얻어 임계 영역(Critical Section)에 들어올 수 있다. 그리고 오직 이 쓰레드만이 임계 영역에서 나갈 때 뮤텍스를 해제할 수 있다.

Semaphore(세마포어)
세마포어는 Signaling 메커니즘이라는 점에서 뮤텍스와 다르다. 세마포어는 락을 걸지 않은 쓰레드도 Signal을 보내 락을 해제할 수 있다는 점에서, wait 함수를 호출한 쓰레드만이 signal 함수를 호출할 수 있는 뮤텍스와 다르다.
세마포어는 동기화를 위해 wait와 signal이라는 2개의 atomic operations를 사용한다.
wait를 호출하면 세마포어의 카운트를 1줄이고, 세마포어의 카운트가 0보다 작거나 같아질 경우에 락이 실행된다. 
